<div class="navbar-wrapper">
  <div class="container">
    <h1>Food Entries</h1>
    <button class="btn btn-primary" data-toggle="modal" data-target="#createEntry">
    Add new entry
    </button>
    <div class="modal fade" id="createEntry" tabindex="-1" role="dialog" aria-labelledby="createEntryLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="createEntryLabel">Create New Entry</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <%= render 'new' %>
          </div>
        </div>
      </div>
    </div>
    <div class="calendar-wrapper">
      <%= month_calendar events: @entries do |date, entries| %>
        <%= date.month %>/<%= date.day %>
        <br>
          <% entries.each do |entry| %>
            <small>
              <%= link_to "View Records", entry_path(entry) %>
            </small>
            <% goal = CalorieGoal.max_calories(current_user, date) %>
            <ul class="list-group list-group-flush">
              <li class="list-group-item">Goal: <%= goal.nil? ? 'No Goal Recorded' : goal.calories %></li>
              <li class="list-group-item">Calorie total: <%= entry.sum_calories %></li>
                <% if goal.nil? %>
                  <li class="list-group-item">Not Enough Data</li>
                <% elsif (goal.calories - entry.sum_calories).positive? %>
                  <li class="list-group-item">Deficit: <span class="deficit"><%= (goal.calories - entry.sum_calories).round(1) %></span></li>
                <% else %>
                  <li class="list-group-item">Excess: <span class="excess"><%= (goal.calories - entry.sum_calories).round(1) * -1 %></span></li>
                <% end %>
            </ul>
          <% end %>
      <% end %>
    </div>
  </div>
</div>